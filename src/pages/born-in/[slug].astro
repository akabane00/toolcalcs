---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdUnit from '../../components/AdUnit.astro';
import CrossLinks from '../../components/CrossLinks.astro';
import '../../styles/calculator.css';
import { getAllBornInPages, type BornInPage } from '../../data/born-in-years';

export function getStaticPaths() {
  return getAllBornInPages().map((page) => ({
    params: { slug: page.slug },
    props: { page },
  }));
}

const { page } = Astro.props as { page: BornInPage };
const { year, turningAge, generation, generationYears, chineseZodiac } = page;

// Cross-links to other routes
const crossLinks = [
  { href: `/roman-numerals/${year}/`, label: `${year} in Roman Numerals`, icon: 'ðŸ›ï¸' },
];

// Related years (+/-5)
const allPages = getAllBornInPages();
const relatedYears = allPages
  .filter((p) => Math.abs(p.year - year) > 0 && Math.abs(p.year - year) <= 5)
  .sort((a, b) => a.year - b.year);

// Life milestones
const milestones = [
  { age: 18, year: year + 18 },
  { age: 21, year: year + 21 },
  { age: 30, year: year + 30 },
  { age: 40, year: year + 40 },
  { age: 50, year: year + 50 },
  { age: 65, year: year + 65 },
  { age: 100, year: year + 100 },
];

// Generation description
function getGenerationDesc(gen: string): string {
  switch (gen) {
    case 'Greatest Generation':
      return 'The Greatest Generation, also known as the G.I. Generation, lived through the Great Depression and fought in World War II. They are characterized by a strong sense of duty, sacrifice, and civic responsibility.';
    case 'Silent Generation':
      return 'The Silent Generation grew up during the Great Depression and World War II. Known for their conformity and hard work, they came of age in a time of economic recovery and played key roles in the civil rights movement.';
    case 'Baby Boomer':
      return 'Baby Boomers were born during the post-World War II population surge. This generation witnessed the civil rights movement, the Vietnam War, and the moon landing. They drove major cultural shifts in the 1960s and 1970s.';
    case 'Generation X':
      return 'Generation X grew up as latchkey kids during a time of rising divorce rates and dual-income families. They witnessed the end of the Cold War, the rise of MTV, and the dawn of the personal computer era. Gen Xers are known for their independence and adaptability.';
    case 'Millennial':
      return 'Millennials, also known as Generation Y, came of age during the rise of the internet and social media. They experienced 9/11 as children or teenagers and entered the workforce during the Great Recession.';
    case 'Generation Z':
      return 'Generation Z are true digital natives who have never known a world without smartphones and social media. They are the most diverse generation in history and are known for their pragmatism and social awareness.';
    case 'Generation Alpha':
      return 'Generation Alpha is the youngest generation, born entirely in the 21st century. They are growing up in a world shaped by artificial intelligence, climate change, and global connectivity.';
    default:
      return '';
  }
}

// SEO
const title = `Born in ${year}? You Are ${turningAge - 1} or ${turningAge} Years Old | ToolCalcs`;
const description = `If you were born in ${year}, you are ${turningAge - 1} or ${turningAge} years old in 2026. Find exact age, generation (${generation}), Chinese zodiac (${chineseZodiac}), and life milestones.`;

const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://toolcalcs.com/" },
      { "@type": "ListItem", "position": 2, "name": "Age Calculator", "item": "https://toolcalcs.com/born-in/" },
      { "@type": "ListItem", "position": 3, "name": `Born in ${year}` },
    ],
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": `How old am I if I was born in ${year}?`,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": `If you were born in ${year}, you are turning ${turningAge} in 2026.`,
        },
      },
      {
        "@type": "Question",
        "name": `What generation is someone born in ${year}?`,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": `Someone born in ${year} belongs to the ${generation} (${generationYears}).`,
        },
      },
      {
        "@type": "Question",
        "name": `What Chinese zodiac sign is ${year}?`,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": `${year} is the Year of the ${chineseZodiac} in the Chinese zodiac.`,
        },
      },
    ],
  },
];
---

<BaseLayout title={title} description={description} type="article" structuredData={structuredData}>
  <nav class="breadcrumb">
    <a href="/">Home</a> &rsaquo;
    <a href="/born-in/">Age Calculator</a> &rsaquo;
    <span>Born in {year}</span>
  </nav>

  <h1>Born in {year} - How Old Am I?</h1>
  <p class="page-desc">Find out exactly how old you are if you were born in {year}.</p>

  <!-- Quick Fact -->
  <div class="quick-fact">
    <span class="quick-fact-label">Quick Fact:</span>
    <strong>If you were born in {year}, you are turning {turningAge} in 2026.</strong>
  </div>

  <!-- Result Cards -->
  <div class="result-cards">
    <div class="result-card primary">
      <span class="result-label">Turning Age</span>
      <span class="result-value">{turningAge}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Current Age</span>
      <span class="result-value">{turningAge - 1} or {turningAge}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Approximate Months</span>
      <span class="result-value">{(turningAge * 12).toLocaleString('en-US')}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Approximate Weeks</span>
      <span class="result-value">{(turningAge * 52).toLocaleString('en-US')}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Generation</span>
      <span class="result-value">{generation}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Chinese Zodiac</span>
      <span class="result-value">{chineseZodiac}</span>
    </div>
  </div>

  <!-- Interactive Calculator -->
  <h2 class="section-heading">Calculate Your Exact Age</h2>
  <div class="calculator-box">
    <p class="calc-desc">Enter your birth month and day for a precise age calculation.</p>
    <div class="calc-row">
      <div class="input-group">
        <label for="birthYear">Birth Year</label>
        <input type="number" id="birthYear" value={year} min="1920" max="2025" readonly />
      </div>
      <div class="input-group">
        <label for="birthMonth">Birth Month</label>
        <select id="birthMonth">
          <option value="1">January</option>
          <option value="2">February</option>
          <option value="3">March</option>
          <option value="4">April</option>
          <option value="5">May</option>
          <option value="6">June</option>
          <option value="7">July</option>
          <option value="8">August</option>
          <option value="9">September</option>
          <option value="10">October</option>
          <option value="11">November</option>
          <option value="12">December</option>
        </select>
      </div>
      <div class="input-group">
        <label for="birthDay">Birth Day</label>
        <input type="number" id="birthDay" value="1" min="1" max="31" />
      </div>
      <button class="calc-btn" id="calcAgeBtn">Calculate Exact Age</button>
    </div>
    <div id="ageResult" class="age-result"></div>
  </div>

  <!-- Life Milestones Table -->
  <h2 class="section-heading">Life Milestones</h2>
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Milestone Age</th>
          <th>Year Reached</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {milestones.map((m) => (
          <tr>
            <td>Age {m.age}</td>
            <td>{m.year}</td>
            <td>{m.year <= 2026 ? 'Reached' : 'Upcoming'}</td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>

  <AdUnit slot="born-in-mid" format="rectangle" />

  <!-- SEO Content -->
  <article class="content-section">
    <h2>How Old Am I If Born in {year}?</h2>
    <p>
      If you were born in {year}, you are turning {turningAge} years old in 2026. Your exact current age depends on whether your birthday has already occurred this year. Before your birthday, you are {turningAge - 1} years old. On or after your birthday, you are {turningAge} years old.
    </p>
    <p>
      To calculate your exact age, subtract your birth year from the current year. If your birthday has not yet passed this calendar year, subtract one additional year. For someone born in {year}, the calculation is 2026 &minus; {year} = {turningAge}. Use the interactive calculator above with your exact birth month and day for a precise age in years, months, and days.
    </p>

    <h2>About the {generation}</h2>
    <p>{getGenerationDesc(generation)}</p>
    <p>
      Someone born in {year} falls within the {generation} cohort ({generationYears}). This generational classification is based on shared historical experiences, cultural touchstones, and demographic patterns that shape attitudes and behaviors throughout life.
    </p>

    <h2>Chinese Zodiac: {chineseZodiac}</h2>
    <p>
      In the Chinese zodiac, {year} is the Year of the {chineseZodiac}. The Chinese zodiac follows a 12-year cycle, with each year associated with an animal sign. People born in the Year of the {chineseZodiac} are traditionally believed to share certain personality traits associated with this animal.
    </p>

    <h2>Frequently Asked Questions</h2>

    <h3>How old am I if I was born in {year}?</h3>
    <p>
      If you were born in {year}, you are turning {turningAge} in 2026. Depending on whether your birthday has already passed, you are currently {turningAge - 1} or {turningAge} years old.
    </p>

    <h3>What generation is someone born in {year}?</h3>
    <p>
      Someone born in {year} is part of the {generation} ({generationYears}). Generational boundaries are approximate and vary slightly by source, but this classification is widely accepted among demographers and researchers.
    </p>

    <h3>What Chinese zodiac sign is {year}?</h3>
    <p>
      {year} is the Year of the {chineseZodiac} in the Chinese zodiac. The Chinese zodiac operates on a 12-year cycle, and the {chineseZodiac} is one of the twelve animal signs.
    </p>

    <h2>Born in Other Years</h2>
    <ul>
      {relatedYears.map((p) => (
        <li>
          <a href={`/born-in/${p.slug}/`}>Born in {p.year} - Age {p.turningAge - 1} or {p.turningAge}</a>
        </li>
      ))}
    </ul>

    <p><a href="/born-in/">&larr; View All Birth Years</a></p>

    <CrossLinks links={crossLinks} />
  </article>

  <AdUnit slot="born-in-bottom" format="horizontal" />
</BaseLayout>

<style>
  .quick-fact {
    background: #eff6ff;
    border-radius: var(--radius);
    padding: 16px 24px;
    margin-bottom: 24px;
    font-size: 1.1rem;
  }
  .quick-fact-label {
    font-size: 0.85rem;
    color: var(--color-text-muted);
    display: block;
    margin-bottom: 4px;
  }
  .quick-fact strong {
    color: var(--color-primary);
    font-size: 1.15rem;
  }

  .section-heading {
    font-size: 1.2rem;
    margin: 32px 0 12px;
  }

  .calc-desc {
    font-size: 0.9rem;
    color: var(--color-text-muted);
    margin-bottom: 16px;
  }
  .calc-row {
    display: flex;
    gap: 16px;
    align-items: end;
    flex-wrap: wrap;
  }
  .calc-row .input-group {
    flex: 1;
    min-width: 140px;
  }
  .age-result {
    margin-top: 16px;
    padding: 14px 16px;
    background: var(--color-bg);
    border-radius: var(--radius);
    font-size: 0.95rem;
    line-height: 1.7;
    min-height: 44px;
  }

  @media (max-width: 640px) {
    .calc-row {
      flex-direction: column;
    }
  }
</style>

<script>
  var yearInput = document.getElementById('birthYear') as HTMLInputElement;
  var monthSelect = document.getElementById('birthMonth') as HTMLSelectElement;
  var dayInput = document.getElementById('birthDay') as HTMLInputElement;
  var calcBtn = document.getElementById('calcAgeBtn') as HTMLButtonElement;
  var resultDiv = document.getElementById('ageResult') as HTMLDivElement;

  function calculateExactAge() {
    var y = parseInt(yearInput.value);
    var m = parseInt(monthSelect.value);
    var d = parseInt(dayInput.value);
    if (isNaN(y) || isNaN(m) || isNaN(d)) {
      resultDiv.textContent = 'Please enter a valid date.';
      return;
    }
    var today = new Date();
    var birth = new Date(y, m - 1, d);
    if (birth > today) {
      resultDiv.textContent = 'Birth date is in the future.';
      return;
    }
    var ageYears = today.getFullYear() - birth.getFullYear();
    var ageMonths = today.getMonth() - birth.getMonth();
    var ageDays = today.getDate() - birth.getDate();
    if (ageDays < 0) {
      ageMonths--;
      var lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
      ageDays += lastMonth.getDate();
    }
    if (ageMonths < 0) {
      ageYears--;
      ageMonths += 12;
    }
    var totalDays = Math.floor((today.getTime() - birth.getTime()) / (1000 * 60 * 60 * 24));
    resultDiv.innerHTML = '<strong>' + ageYears + ' years, ' + ageMonths + ' months, ' + ageDays + ' days</strong>' +
      '<br>Total: ' + totalDays.toLocaleString('en-US') + ' days (' + Math.floor(totalDays / 7).toLocaleString('en-US') + ' weeks)';
  }

  calcBtn.addEventListener('click', calculateExactAge);
  dayInput.addEventListener('keydown', function(e) {
    if ((e as KeyboardEvent).key === 'Enter') calculateExactAge();
  });
</script>
