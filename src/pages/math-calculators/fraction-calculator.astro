---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdUnit from '../../components/AdUnit.astro';
import '../../styles/calculator.css';

const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://toolcalcs.com/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Math Calculators",
        "item": "https://toolcalcs.com/math-calculators/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "Fraction Calculator"
      }
    ]
  },
  {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: 'How do you add fractions with different denominators?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'To add fractions with different denominators, first find the least common denominator (LCD). Convert each fraction to an equivalent fraction with the LCD, then add the numerators and keep the common denominator. Finally, simplify the result if possible. For example, 1/3 + 1/4 = 4/12 + 3/12 = 7/12.',
      },
    },
    {
      '@type': 'Question',
      name: 'How do you multiply fractions?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'Multiplying fractions is straightforward: multiply the numerators together to get the new numerator, and multiply the denominators together to get the new denominator. Then simplify the result. For example, 2/3 times 3/4 = 6/12, which simplifies to 1/2.',
      },
    },
    {
      '@type': 'Question',
      name: 'How do you divide fractions?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'To divide fractions, multiply the first fraction by the reciprocal (flipped version) of the second fraction. For example, 2/3 divided by 4/5 becomes 2/3 times 5/4 = 10/12, which simplifies to 5/6. This method is often remembered as "keep, change, flip."',
      },
    },
  ],
},
];
---

<BaseLayout
  title="Fraction Calculator - Add, Subtract, Multiply & Divide Fractions | ToolCalcs"
  description="Free online fraction calculator. Add, subtract, multiply, and divide fractions with step-by-step solutions. Simplify fractions and convert between mixed numbers and improper fractions."
  type="article"
  structuredData={structuredData}
>
  <nav class="breadcrumb">
    <a href="/">Home</a> &rsaquo;
    <a href="/math-calculators/">Math Calculators</a> &rsaquo;
    <span>Fraction Calculator</span>
  </nav>

  <h1>Fraction Calculator</h1>
  <p class="page-desc">Add, subtract, multiply, and divide fractions with step-by-step solutions. Enter your fractions below to get instant results.</p>

  <div class="calculator-box">
    <div class="fraction-inputs">
      <div class="fraction-entry">
        <label class="fraction-label">Fraction 1</label>
        <div class="fraction-input-group">
          <input type="number" id="num1" value="1" class="fraction-input" aria-label="Numerator 1" />
          <div class="fraction-line"></div>
          <input type="number" id="den1" value="2" class="fraction-input" aria-label="Denominator 1" />
        </div>
      </div>

      <div class="operation-wrapper">
        <select id="operation" class="operation-select" aria-label="Operation">
          <option value="add">+</option>
          <option value="subtract">&minus;</option>
          <option value="multiply">&times;</option>
          <option value="divide">&divide;</option>
        </select>
      </div>

      <div class="fraction-entry">
        <label class="fraction-label">Fraction 2</label>
        <div class="fraction-input-group">
          <input type="number" id="num2" value="1" class="fraction-input" aria-label="Numerator 2" />
          <div class="fraction-line"></div>
          <input type="number" id="den2" value="3" class="fraction-input" aria-label="Denominator 2" />
        </div>
      </div>

      <div class="equals-wrapper">
        <button class="calc-btn" id="calculateBtn">Calculate</button>
      </div>
    </div>

    <div id="resultArea" class="result-area" style="display:none;">
      <div class="result-row">
        <span class="result-label">Result (fraction):</span>
        <span class="result-value" id="resultFraction"></span>
      </div>
      <div class="result-row">
        <span class="result-label">Result (decimal):</span>
        <span class="result-value" id="resultDecimal"></span>
      </div>
      <div class="steps-section">
        <h3 class="steps-title">Step-by-step solution</h3>
        <div id="stepsContent" class="steps-content"></div>
      </div>
    </div>
  </div>

  <AdUnit slot="calc-mid" format="rectangle" />

  <article class="content-section">
    <h2>What Are Fractions?</h2>
    <p>A fraction represents a part of a whole. It consists of two numbers separated by a horizontal line: the <strong>numerator</strong> (top number) and the <strong>denominator</strong> (bottom number). The numerator tells you how many parts you have, while the denominator tells you how many equal parts the whole has been divided into.</p>
    <p>For example, the fraction 3/4 means you have 3 parts out of a total of 4 equal parts. Fractions are one of the foundational concepts in mathematics, appearing everywhere from cooking recipes and construction measurements to financial calculations and scientific research. Understanding how to work with fractions is essential for success in algebra, geometry, and virtually every other branch of mathematics.</p>
    <p>Fractions can be classified into several types. A <strong>proper fraction</strong> has a numerator smaller than its denominator (like 2/5), meaning the value is less than one. An <strong>improper fraction</strong> has a numerator equal to or greater than its denominator (like 7/4), meaning the value is one or greater. A <strong>mixed number</strong> combines a whole number with a proper fraction (like 1 3/4). Each form is useful in different situations, and knowing how to convert between them is an important skill.</p>

    <h2>How to Add and Subtract Fractions</h2>
    <p>Adding and subtracting fractions requires a common denominator. When two fractions share the same denominator, you simply add or subtract the numerators while keeping the denominator the same. For example, 2/7 + 3/7 = 5/7. The process becomes slightly more involved when the denominators differ.</p>
    <p>When the denominators are different, you must first find a <strong>common denominator</strong> before performing the operation. The most efficient approach is to find the <strong>Least Common Denominator (LCD)</strong>, which is the smallest number that both denominators divide into evenly. To find the LCD, you can list the multiples of each denominator until you find the smallest shared multiple, or you can use the formula: LCD = (a &times; b) / GCD(a, b), where GCD is the greatest common divisor.</p>
    <p>Once you have the LCD, convert each fraction to an equivalent fraction with the LCD as its denominator. You do this by multiplying both the numerator and denominator of each fraction by whatever factor is needed. Then add or subtract the numerators, keeping the LCD as the denominator. Finally, simplify the result if possible.</p>
    <p><strong>Example &mdash; Adding 1/3 + 1/4:</strong></p>
    <ul>
      <li>Find the LCD of 3 and 4: LCD = 12</li>
      <li>Convert 1/3 to 4/12 (multiply top and bottom by 4)</li>
      <li>Convert 1/4 to 3/12 (multiply top and bottom by 3)</li>
      <li>Add the numerators: 4/12 + 3/12 = 7/12</li>
      <li>7/12 is already in simplest form</li>
    </ul>
    <p><strong>Example &mdash; Subtracting 5/6 &minus; 1/4:</strong></p>
    <ul>
      <li>Find the LCD of 6 and 4: LCD = 12</li>
      <li>Convert 5/6 to 10/12 (multiply top and bottom by 2)</li>
      <li>Convert 1/4 to 3/12 (multiply top and bottom by 3)</li>
      <li>Subtract the numerators: 10/12 &minus; 3/12 = 7/12</li>
    </ul>
    <p>The key principle to remember is that fractions must refer to the same-sized pieces (same denominator) before you can combine them. This is analogous to adding apples and oranges &mdash; you cannot directly combine them until they share a common unit.</p>

    <h2>How to Multiply Fractions</h2>
    <p>Multiplying fractions is one of the simplest fraction operations. Unlike addition and subtraction, you do <strong>not</strong> need a common denominator. The process is straightforward: multiply the numerators together to get the new numerator, and multiply the denominators together to get the new denominator.</p>
    <div class="formula-box"><code>(a/b) &times; (c/d) = (a &times; c) / (b &times; d)</code></div>
    <p><strong>Example &mdash; Multiplying 2/3 &times; 4/5:</strong></p>
    <ul>
      <li>Multiply numerators: 2 &times; 4 = 8</li>
      <li>Multiply denominators: 3 &times; 5 = 15</li>
      <li>Result: 8/15 (already simplified)</li>
    </ul>
    <p>A useful shortcut when multiplying fractions is <strong>cross-cancellation</strong>. Before multiplying, look for common factors between any numerator and any denominator, and divide them out first. This keeps the numbers smaller and may eliminate the need to simplify afterward. For instance, in 3/8 &times; 4/9, you can cancel the 3 from the first numerator with the 9 in the second denominator (both divisible by 3), and cancel the 4 from the second numerator with the 8 in the first denominator (both divisible by 4), giving 1/2 &times; 1/3 = 1/6.</p>
    <p>Multiplying fractions has many real-world applications. When a recipe calls for 2/3 of a cup of flour and you want to make half the recipe, you calculate 1/2 &times; 2/3 = 2/6 = 1/3 of a cup. In probability, the likelihood of two independent events both occurring is found by multiplying their individual probabilities, which are often expressed as fractions.</p>

    <h2>How to Divide Fractions</h2>
    <p>Dividing fractions uses a method commonly taught as <strong>"keep, change, flip"</strong> (also called "multiply by the reciprocal"). To divide one fraction by another, you keep the first fraction the same, change the division sign to multiplication, and flip the second fraction (swap its numerator and denominator). Then you multiply as usual.</p>
    <div class="formula-box"><code>(a/b) &divide; (c/d) = (a/b) &times; (d/c) = (a &times; d) / (b &times; c)</code></div>
    <p><strong>Example &mdash; Dividing 3/4 &divide; 2/5:</strong></p>
    <ul>
      <li>Keep 3/4, change &divide; to &times;, flip 2/5 to 5/2</li>
      <li>Multiply: 3/4 &times; 5/2 = 15/8</li>
      <li>Convert to mixed number: 1 7/8</li>
    </ul>
    <p>The reason this method works lies in the definition of division. Dividing by a fraction is the same as asking "how many groups of that fraction fit into the first fraction?" Multiplying by the reciprocal answers this question mathematically. If you divide 1/2 by 1/4, you are asking how many quarter-pieces fit into a half, and the answer is 2, which is exactly what 1/2 &times; 4/1 = 4/2 = 2 gives you.</p>
    <p>Division of fractions appears frequently in everyday scenarios. For example, if you have 3/4 of a pizza and want to split it equally among 3 people, each person gets 3/4 &divide; 3 = 3/4 &times; 1/3 = 3/12 = 1/4 of the pizza.</p>

    <h2>Simplifying Fractions</h2>
    <p>A fraction is in its <strong>simplest form</strong> (or lowest terms) when the numerator and denominator have no common factors other than 1. Simplifying a fraction means dividing both the numerator and denominator by their <strong>Greatest Common Divisor (GCD)</strong>.</p>
    <p>To find the GCD, you can use several methods. The <strong>Euclidean algorithm</strong> is one of the most efficient approaches: repeatedly divide the larger number by the smaller and take the remainder, until the remainder is zero. The last non-zero remainder is the GCD. For example, to find the GCD of 48 and 18: 48 &divide; 18 = 2 remainder 12, then 18 &divide; 12 = 1 remainder 6, then 12 &divide; 6 = 2 remainder 0. The GCD is 6, so 48/18 simplifies to 8/3.</p>
    <p>Simplifying fractions is important for several reasons. Simplified fractions are easier to read, compare, and work with in further calculations. In mathematics, answers are typically expected in simplified form. When comparing fractions, simplifying each to lowest terms or converting to a common denominator makes it much easier to determine which is larger.</p>
    <p>Another useful technique is <strong>prime factorization</strong>. Break both the numerator and denominator into their prime factors, then cancel out any common prime factors. For 60/84: 60 = 2 &times; 2 &times; 3 &times; 5 and 84 = 2 &times; 2 &times; 3 &times; 7, so canceling the common factors (2 &times; 2 &times; 3 = 12) gives 5/7.</p>

    <h2>Mixed Numbers and Improper Fractions</h2>
    <p>A <strong>mixed number</strong> is a combination of a whole number and a proper fraction, such as 2 3/4. An <strong>improper fraction</strong> is a fraction whose numerator is greater than or equal to its denominator, such as 11/4. These two forms are interchangeable, and knowing how to convert between them is a critical skill.</p>
    <p><strong>Converting a mixed number to an improper fraction:</strong> Multiply the whole number by the denominator, add the numerator, and place the result over the original denominator. For example, 2 3/4 becomes (2 &times; 4 + 3) / 4 = 11/4.</p>
    <p><strong>Converting an improper fraction to a mixed number:</strong> Divide the numerator by the denominator. The quotient becomes the whole number part, the remainder becomes the new numerator, and the denominator stays the same. For example, 11/4: 11 &divide; 4 = 2 with a remainder of 3, so 11/4 = 2 3/4.</p>
    <p>When performing arithmetic operations with mixed numbers, it is generally easiest to first convert them to improper fractions, perform the operation, and then convert the result back to a mixed number if desired. This avoids the complexity of trying to add or subtract the whole number parts and fraction parts separately, which can lead to errors, especially with borrowing during subtraction.</p>
    <p>Mixed numbers are commonly used in everyday life for measurements. A board that is 5 3/8 inches long, a recipe that calls for 1 1/2 cups of sugar, or a child who is 3 1/4 feet tall &mdash; these are all natural uses of mixed numbers. Improper fractions, on the other hand, are often preferred in algebra and higher mathematics because they are simpler to manipulate in equations and formulas.</p>
    <p>Equivalent fractions are another important concept. Two fractions are equivalent if they represent the same value, even though they have different numerators and denominators. For example, 1/2, 2/4, 3/6, and 50/100 are all equivalent fractions. You create equivalent fractions by multiplying or dividing both the numerator and denominator by the same non-zero number. This concept is fundamental to finding common denominators for addition and subtraction.</p>

    <h2>Frequently Asked Questions</h2>
    <h3>How do you add fractions with different denominators?</h3>
    <p>To add fractions with different denominators, find the least common denominator (LCD) of the two fractions. Convert each fraction to an equivalent fraction with the LCD as the denominator. Then add the numerators together, keeping the LCD as the denominator. Simplify the resulting fraction if possible. For example, to add 1/3 + 1/4, find the LCD of 3 and 4, which is 12. Convert to 4/12 + 3/12 = 7/12.</p>

    <h3>How do you multiply fractions?</h3>
    <p>Multiplying fractions is simple: multiply the two numerators together to get the new numerator, and multiply the two denominators together to get the new denominator. Then simplify the result by dividing both the numerator and denominator by their greatest common divisor (GCD). For example, 2/3 &times; 3/4 = 6/12 = 1/2.</p>

    <h3>How do you divide fractions?</h3>
    <p>To divide fractions, use the "keep, change, flip" method. Keep the first fraction as it is, change the division sign to a multiplication sign, and flip the second fraction (find its reciprocal). Then multiply the two fractions normally. For example, 2/3 &divide; 4/5 = 2/3 &times; 5/4 = 10/12 = 5/6. This works because dividing by a fraction is the same as multiplying by its reciprocal.</p>
    <h2>Related Calculators</h2>
    <ul>
      <li><a href="/math-calculators/percentage-calculator/">Percentage Calculator</a> - Quick percentage calculations.</li>
      <li><a href="/math-calculators/gpa-calculator/">GPA Calculator</a> - Calculate your grade point average.</li>
    </ul>
  </article>

  <AdUnit slot="calc-bottom" format="horizontal" />
</BaseLayout>

<style>
.fraction-inputs {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }

  .fraction-entry {
    text-align: center;
  }

  .fraction-label {
    display: block;
    font-size: 0.85rem;
    color: var(--color-text-muted);
    margin-bottom: 8px;
    font-weight: 500;
  }

  .fraction-input-group {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }

  .fraction-input {
    width: 80px;
    padding: 8px 10px;
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    font-size: 1.1rem;
    text-align: center;
    background: var(--color-bg);
  }
  .fraction-input:focus { outline: none; border-color: var(--color-primary); }

  .fraction-line {
    width: 100%;
    border-top: 2px solid var(--color-text);
  }

  .operation-wrapper {
    display: flex;
    align-items: center;
    padding-top: 20px;
  }

  .operation-select {
    width: 56px;
    padding: 10px 6px;
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    font-size: 1.2rem;
    text-align: center;
    background: var(--color-bg);
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
  }
  .operation-select:focus { outline: none; border-color: var(--color-primary); }

  .equals-wrapper {
    display: flex;
    align-items: center;
    padding-top: 20px;
  }

  
  

  .result-area {
    margin-top: 24px;
    padding-top: 24px;
    border-top: 1px solid var(--color-border);
  }

  .result-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
    flex-wrap: wrap;
  }

  

  .result-value {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--color-primary);
  }

  .fraction-display {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    padding: 0 4px;
    vertical-align: middle;
    line-height: 1.2;
  }

  .fraction-display .frac-num,
  .fraction-display .frac-den {
    display: block;
    text-align: center;
  }

  .fraction-display .frac-line {
    width: 100%;
    border-top: 2px solid currentColor;
    margin: 2px 0;
  }

  .steps-section {
    margin-top: 20px;
  }

  .steps-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--color-text);
  }

  .steps-content {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    padding: 16px 20px;
    font-size: 0.95rem;
    line-height: 1.8;
  }

  .step-item {
    padding: 4px 0;
  }

  .step-item + .step-item {
    border-top: 1px dashed var(--color-border);
  }

  
  
  
  
  
  .content-section ul { margin: 0 0 16px 24px; }
  
  

  @media (max-width: 640px) {
    .fraction-inputs {
      gap: 12px;
    }
    .fraction-input {
      width: 64px;
      font-size: 1rem;
    }
    .operation-select {
      width: 48px;
      font-size: 1.1rem;
    }
    .calc-btn {
      width: 100%;
      margin-top: 4px;
    }
    .equals-wrapper {
      width: 100%;
      padding-top: 8px;
    }
    .result-row {
      flex-direction: column;
      align-items: flex-start;
      gap: 4px;
    }
    
  }
</style>

<script is:inline>
  // --- Helper Functions ---
  function gcd(a, b) {
    a = Math.abs(a);
    b = Math.abs(b);
    while (b !== 0) {
      var t = b;
      b = a % b;
      a = t;
    }
    return a;
  }

  function lcm(a, b) {
    return Math.abs(a * b) / gcd(a, b);
  }

  function simplifyFraction(num, den) {
    if (den === 0) return { num: num, den: den };
    if (num === 0) return { num: 0, den: 1 };
    var sign = (den < 0) ? -1 : 1;
    num = num * sign;
    den = den * sign;
    var g = gcd(Math.abs(num), Math.abs(den));
    return { num: num / g, den: den / g };
  }

  function fractionHTML(num, den) {
    return '<span class="fraction-display">' +
      '<span class="frac-num">' + num + '</span>' +
      '<span class="frac-line"></span>' +
      '<span class="frac-den">' + den + '</span>' +
      '</span>';
  }

  // --- Main Calculation ---
  function calculate() {
    var n1 = parseInt(document.getElementById('num1').value);
    var d1 = parseInt(document.getElementById('den1').value);
    var n2 = parseInt(document.getElementById('num2').value);
    var d2 = parseInt(document.getElementById('den2').value);
    var op = document.getElementById('operation').value;

    if (isNaN(n1) || isNaN(d1) || isNaN(n2) || isNaN(d2)) {
      alert('Please enter valid numbers for all fields.');
      return;
    }
    if (d1 === 0 || d2 === 0) {
      alert('Denominators cannot be zero.');
      return;
    }
    if (op === 'divide' && n2 === 0) {
      alert('Cannot divide by zero (second fraction numerator is 0).');
      return;
    }

    var resNum, resDen;
    var steps = [];
    var opSymbol = { add: '+', subtract: '\u2212', multiply: '\u00d7', divide: '\u00f7' }[op];

    steps.push('<div class="step-item"><strong>Problem:</strong> ' + fractionHTML(n1, d1) + ' ' + opSymbol + ' ' + fractionHTML(n2, d2) + '</div>');

    if (op === 'add' || op === 'subtract') {
      var lcd = lcm(d1, d2);
      var mult1 = lcd / d1;
      var mult2 = lcd / d2;
      var newN1 = n1 * mult1;
      var newN2 = n2 * mult2;

      steps.push('<div class="step-item"><strong>Step 1:</strong> Find the Least Common Denominator (LCD) of ' + d1 + ' and ' + d2 + '.<br>LCD = ' + lcd + '</div>');

      if (d1 !== lcd || d2 !== lcd) {
        steps.push('<div class="step-item"><strong>Step 2:</strong> Convert fractions to equivalent fractions with LCD = ' + lcd + '.<br>' +
          fractionHTML(n1, d1) + ' = ' + fractionHTML(n1 + ' \u00d7 ' + mult1, d1 + ' \u00d7 ' + mult1) + ' = ' + fractionHTML(newN1, lcd) +
          '<br>' +
          fractionHTML(n2, d2) + ' = ' + fractionHTML(n2 + ' \u00d7 ' + mult2, d2 + ' \u00d7 ' + mult2) + ' = ' + fractionHTML(newN2, lcd) +
          '</div>');
      } else {
        steps.push('<div class="step-item"><strong>Step 2:</strong> Both fractions already have the same denominator.</div>');
      }

      if (op === 'add') {
        resNum = newN1 + newN2;
        steps.push('<div class="step-item"><strong>Step 3:</strong> Add the numerators.<br>' +
          fractionHTML(newN1, lcd) + ' + ' + fractionHTML(newN2, lcd) + ' = ' + fractionHTML(newN1 + ' + ' + newN2, lcd) + ' = ' + fractionHTML(resNum, lcd) + '</div>');
      } else {
        resNum = newN1 - newN2;
        steps.push('<div class="step-item"><strong>Step 3:</strong> Subtract the numerators.<br>' +
          fractionHTML(newN1, lcd) + ' \u2212 ' + fractionHTML(newN2, lcd) + ' = ' + fractionHTML(newN1 + ' \u2212 ' + newN2, lcd) + ' = ' + fractionHTML(resNum, lcd) + '</div>');
      }
      resDen = lcd;

    } else if (op === 'multiply') {
      resNum = n1 * n2;
      resDen = d1 * d2;
      steps.push('<div class="step-item"><strong>Step 1:</strong> Multiply the numerators.<br>' + n1 + ' \u00d7 ' + n2 + ' = ' + resNum + '</div>');
      steps.push('<div class="step-item"><strong>Step 2:</strong> Multiply the denominators.<br>' + d1 + ' \u00d7 ' + d2 + ' = ' + resDen + '</div>');
      steps.push('<div class="step-item"><strong>Step 3:</strong> Combine.<br>' +
        fractionHTML(n1, d1) + ' \u00d7 ' + fractionHTML(n2, d2) + ' = ' + fractionHTML(resNum, resDen) + '</div>');

    } else if (op === 'divide') {
      steps.push('<div class="step-item"><strong>Step 1:</strong> Flip the second fraction (find its reciprocal).<br>' +
        fractionHTML(n2, d2) + ' becomes ' + fractionHTML(d2, n2) + '</div>');
      resNum = n1 * d2;
      resDen = d1 * n2;
      steps.push('<div class="step-item"><strong>Step 2:</strong> Multiply the first fraction by the reciprocal.<br>' +
        fractionHTML(n1, d1) + ' \u00d7 ' + fractionHTML(d2, n2) + ' = ' + fractionHTML(resNum, resDen) + '</div>');
    }

    // Simplify
    var simplified = simplifyFraction(resNum, resDen);
    if (simplified.num !== resNum || simplified.den !== resDen) {
      var g = gcd(Math.abs(resNum), Math.abs(resDen));
      steps.push('<div class="step-item"><strong>Simplify:</strong> Divide numerator and denominator by their GCD (' + g + ').<br>' +
        fractionHTML(resNum, resDen) + ' = ' + fractionHTML(resNum + ' \u00f7 ' + g, resDen + ' \u00f7 ' + g) + ' = ' + fractionHTML(simplified.num, simplified.den) + '</div>');
    } else {
      steps.push('<div class="step-item"><strong>Simplify:</strong> ' + fractionHTML(simplified.num, simplified.den) + ' is already in simplest form.</div>');
    }

    // Display results
    var resultArea = document.getElementById('resultArea');
    resultArea.style.display = 'block';

    // Result as fraction
    var fractionResult;
    if (simplified.den === 1) {
      fractionResult = '<strong>' + simplified.num + '</strong>';
    } else {
      fractionResult = fractionHTML(simplified.num, simplified.den);
    }
    // If improper, also show mixed number
    if (Math.abs(simplified.num) > simplified.den && simplified.den !== 1) {
      var whole = Math.trunc(simplified.num / simplified.den);
      var remNum = Math.abs(simplified.num) - Math.abs(whole) * simplified.den;
      if (remNum !== 0) {
        fractionResult += '&nbsp; = &nbsp;<strong>' + whole + '</strong> ' + fractionHTML(remNum, simplified.den);
      }
    }
    document.getElementById('resultFraction').innerHTML = fractionResult;

    // Result as decimal
    var decimal = simplified.num / simplified.den;
    var decimalStr = (decimal % 1 === 0) ? decimal.toString() : decimal.toLocaleString('en-US', { maximumFractionDigits: 8 });
    document.getElementById('resultDecimal').textContent = decimalStr;

    // Steps
    document.getElementById('stepsContent').innerHTML = steps.join('');
  }

  document.getElementById('calculateBtn').addEventListener('click', calculate);
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') calculate();
  });

  // Run on load
  calculate();
</script>
