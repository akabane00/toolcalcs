---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdUnit from '../../components/AdUnit.astro';
import '../../styles/calculator.css';
import { getAllRomanNumeralPages, intToRoman, romanToInt, type RomanNumeralPage } from '../../data/roman-numerals';

export function getStaticPaths() {
  return getAllRomanNumeralPages().map((page) => ({
    params: { slug: page.slug },
    props: { page },
  }));
}

const { page } = Astro.props as { page: RomanNumeralPage };
const { number, roman, breakdown } = page;

const allPages = getAllRomanNumeralPages();
const fmt = (n: number) => n.toLocaleString('en-US');

// Nearby numbers +/-5 range
const nearbyPages = allPages
  .filter((p) => p.number !== number && Math.abs(p.number - number) <= 5)
  .sort((a, b) => a.number - b.number);

// Related links +/-5
const relatedPages = allPages
  .filter((p) => p.number !== number && Math.abs(p.number - number) <= 5)
  .sort((a, b) => a.number - b.number);

// Category label
function getCategory(n: number): string {
  if (n >= 1 && n <= 10) return '1-10';
  if (n >= 11 && n <= 100) return '11-100';
  return 'Year';
}

// Subtractive notation reference
const subtractiveNotations = [
  { symbol: 'IV', value: 4 },
  { symbol: 'IX', value: 9 },
  { symbol: 'XL', value: 40 },
  { symbol: 'XC', value: 90 },
  { symbol: 'CD', value: 400 },
  { symbol: 'CM', value: 900 },
];

// SEO
const title = `${number} in Roman Numerals - ${roman} | ToolCalcs`;
const description = `${number} in Roman numerals is ${roman}. Learn the step-by-step conversion, rules, and practice with our interactive Roman numeral converter.`;

const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://toolcalcs.com/" },
      { "@type": "ListItem", "position": 2, "name": "Math Calculators", "item": "https://toolcalcs.com/math-calculators/" },
      { "@type": "ListItem", "position": 3, "name": `${number} in Roman Numerals` },
    ],
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": `What is ${number} in Roman numerals?`,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": `${number} in Roman numerals is ${roman}.`,
        },
      },
      {
        "@type": "Question",
        "name": `How do you write ${roman} in numbers?`,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": `The Roman numeral ${roman} represents the number ${number}.`,
        },
      },
      {
        "@type": "Question",
        "name": `How to convert numbers to Roman numerals?`,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": `To convert a number to Roman numerals, use the greedy algorithm: starting from the largest Roman numeral value (M=1000), repeatedly subtract the largest possible value and append the corresponding symbol. Continue with CM=900, D=500, CD=400, C=100, XC=90, L=50, XL=40, X=10, IX=9, V=5, IV=4, I=1 until the number reaches zero.`,
        },
      },
    ],
  },
];
---

<BaseLayout title={title} description={description} type="article" structuredData={structuredData}>
  <nav class="breadcrumb">
    <a href="/">Home</a> &rsaquo;
    <a href="/math-calculators/">Math Calculators</a> &rsaquo;
    <span>{number} in Roman Numerals</span>
  </nav>

  <h1>{number} in Roman Numerals</h1>
  <p class="page-desc">Learn how to convert {number} to Roman numerals step by step.</p>

  <!-- Quick Fact -->
  <div class="quick-fact">
    <span class="quick-fact-label">Quick Fact:</span>
    <strong>{number} in Roman numerals is {roman}</strong>
  </div>

  <!-- Result Cards -->
  <div class="result-cards">
    <div class="result-card primary">
      <span class="result-label">Roman Numeral</span>
      <span class="result-value roman-large">{roman}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Arabic Number</span>
      <span class="result-value">{fmt(number)}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Number of Symbols</span>
      <span class="result-value">{roman.length}</span>
    </div>
    <div class="result-card">
      <span class="result-label">Category</span>
      <span class="result-value">{getCategory(number)}</span>
    </div>
  </div>

  <!-- Step-by-Step Breakdown -->
  <div class="calculator-box">
    <h2 class="calc-section-title">Step-by-Step Conversion</h2>
    <div class="step-list">
      {breakdown.map((b, i) => (
        <div class="step">
          <span class="step-num">{i + 1}</span>
          <div class="step-content">
            <p class="step-label">{fmt(b.value)} = {b.symbol}</p>
          </div>
        </div>
      ))}
      <div class="step">
        <span class="step-num result-step">&rarr;</span>
        <div class="step-content">
          <p class="step-label step-result">Result: <strong>{roman}</strong></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Roman Numeral Reference Table -->
  <h2 class="section-heading">Roman Numeral Reference Table</h2>
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><strong>I</strong></td><td>1</td></tr>
        <tr><td><strong>V</strong></td><td>5</td></tr>
        <tr><td><strong>X</strong></td><td>10</td></tr>
        <tr><td><strong>L</strong></td><td>50</td></tr>
        <tr><td><strong>C</strong></td><td>100</td></tr>
        <tr><td><strong>D</strong></td><td>500</td></tr>
        <tr><td><strong>M</strong></td><td>1,000</td></tr>
      </tbody>
    </table>
  </div>

  <h2 class="section-heading">Subtractive Notation</h2>
  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        {subtractiveNotations.map((s) => (
          <tr>
            <td><strong>{s.symbol}</strong></td>
            <td>{fmt(s.value)}</td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>

  <!-- Interactive Converter -->
  <h2 class="section-heading">Interactive Converter</h2>
  <div class="calculator-box">
    <div class="converter-row">
      <div class="converter-col">
        <div class="input-group">
          <label for="numInput">Number (1-3999)</label>
          <input type="number" id="numInput" value={number} min="1" max="3999" />
        </div>
        <button class="calc-btn" id="numToRomanBtn">Convert to Roman</button>
        <div id="numToRomanResult" class="converter-result"></div>
      </div>
      <div class="converter-col">
        <div class="input-group">
          <label for="romanInput">Roman Numeral</label>
          <input type="text" id="romanInput" value={roman} pattern="[MmDdCcLlXxVvIi]+" />
        </div>
        <button class="calc-btn" id="romanToNumBtn">Convert to Number</button>
        <div id="romanToNumResult" class="converter-result"></div>
      </div>
    </div>
  </div>

  <!-- Nearby Numbers Table -->
  {nearbyPages.length > 0 && (
    <h2 class="section-heading">Nearby Numbers</h2>
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Number</th>
            <th>Roman Numeral</th>
          </tr>
        </thead>
        <tbody>
          {nearbyPages.map((p) => (
            <tr>
              <td><a href={`/roman-numerals/${p.slug}/`}>{fmt(p.number)}</a></td>
              <td>{p.roman}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  )}

  <AdUnit slot="roman-mid" format="rectangle" />

  <!-- SEO Content -->
  <article class="content-section">
    <h2>How to Convert {number} to Roman Numerals</h2>
    <p>
      Converting {number} to Roman numerals involves breaking the number down into components that correspond to standard Roman numeral values, starting from the largest value possible. The process uses a greedy algorithm: at each step, subtract the largest Roman numeral value that fits and write down the corresponding symbol.
    </p>
    <p>
      For {number}, the breakdown is: {breakdown.map((b) => `${fmt(b.value)} (${b.symbol})`).join(' + ')}. Combining these symbols in order gives us <strong>{roman}</strong>. This method works for any number from 1 to 3,999.
    </p>

    <h2>Roman Numeral Rules</h2>
    <p>
      Roman numerals are built from seven base symbols: I (1), V (5), X (10), L (50), C (100), D (500), and M (1,000). The core rules are:
    </p>
    <ul>
      <li><strong>Addition principle:</strong> When a smaller or equal symbol appears after a larger one, add its value. For example, VII = 5 + 1 + 1 = 7.</li>
      <li><strong>Subtraction principle:</strong> When a smaller symbol appears before a larger one, subtract the smaller value. For example, IV = 5 - 1 = 4, and IX = 10 - 1 = 9.</li>
      <li><strong>Maximum three repetitions:</strong> A symbol can be repeated up to three consecutive times (e.g., III = 3), but never four. Instead, use subtractive notation (IV for 4, not IIII).</li>
    </ul>
    <p>
      The six subtractive combinations are: IV (4), IX (9), XL (40), XC (90), CD (400), and CM (900). Only I, X, and C can be used subtractively, and only before the next two higher values.
    </p>

    <h2>Modern Uses of Roman Numerals</h2>
    <p>
      Roman numerals are still used extensively in modern contexts despite being thousands of years old:
    </p>
    <ul>
      <li><strong>Clocks and watches:</strong> Traditional clock faces use Roman numerals (I through XII) to mark the hours.</li>
      <li><strong>Movie and TV titles:</strong> Film sequels and copyright dates in credits often appear in Roman numerals (e.g., MMXXVI for 2026).</li>
      <li><strong>Super Bowl numbering:</strong> The NFL uses Roman numerals to designate each Super Bowl (e.g., Super Bowl LX).</li>
      <li><strong>Outlines and numbering:</strong> Academic papers, legal documents, and book chapters frequently use Roman numerals for hierarchical numbering.</li>
      <li><strong>Monarchs and popes:</strong> Royal and papal names use Roman numerals to distinguish rulers with the same name (e.g., Henry VIII, Pope John XXIII).</li>
    </ul>

    <h2>Frequently Asked Questions</h2>

    <h3>What is {number} in Roman numerals?</h3>
    <p>
      {number} in Roman numerals is <strong>{roman}</strong>. This is obtained by breaking {number} into its component values ({breakdown.map((b) => fmt(b.value)).join(' + ')}) and converting each to the corresponding Roman numeral symbol ({breakdown.map((b) => b.symbol).join(' + ')}).
    </p>

    <h3>How do you write {roman} in numbers?</h3>
    <p>
      The Roman numeral {roman} represents the number <strong>{fmt(number)}</strong>. To convert Roman numerals to a number, read the symbols from left to right. If a smaller value precedes a larger one, subtract it; otherwise, add it. Adding up all values in {roman} gives {fmt(number)}.
    </p>

    <h3>How to convert numbers to Roman numerals?</h3>
    <p>
      Use the greedy algorithm: start with the largest Roman numeral value (M = 1,000) and check if it fits into the remaining number. If it does, write the symbol and subtract the value. Continue with the next largest value (CM = 900, D = 500, CD = 400, etc.) until the remaining number reaches zero. This approach produces the correct Roman numeral representation for any number from 1 to 3,999.
    </p>

    <h2>Related Numbers</h2>
    <ul>
      {relatedPages.map((p) => (
        <li>
          <a href={`/roman-numerals/${p.slug}/`}>{fmt(p.number)} in Roman Numerals = {p.roman}</a>
        </li>
      ))}
    </ul>

    <p><a href="/roman-numerals/">&larr; View All Roman Numerals</a> | <a href="/math-calculators/">Math Calculators</a></p>
  </article>

  <AdUnit slot="roman-bottom" format="horizontal" />
</BaseLayout>

<style>
  .quick-fact {
    background: #eff6ff;
    border-radius: var(--radius);
    padding: 16px 24px;
    margin-bottom: 24px;
    font-size: 1.1rem;
  }
  .quick-fact-label {
    font-size: 0.85rem;
    color: var(--color-text-muted);
    display: block;
    margin-bottom: 4px;
  }
  .quick-fact strong {
    color: var(--color-primary);
    font-size: 1.15rem;
  }

  .roman-large {
    font-size: 1.8rem;
    letter-spacing: 0.04em;
  }

  .calc-section-title {
    font-size: 1.15rem;
    margin: 0 0 16px;
    border: none;
    padding: 0;
  }
  .section-heading {
    font-size: 1.2rem;
    margin: 32px 0 12px;
  }

  .step-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .step {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .step-num {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--color-primary);
    color: #fff;
    font-weight: 700;
    font-size: 0.9rem;
    flex-shrink: 0;
  }
  .step-num.result-step {
    background: var(--color-success, #16a34a);
  }
  .step-content {
    flex: 1;
  }
  .step-label {
    font-weight: 500;
    font-size: 0.95rem;
    margin: 0;
  }
  .step-result {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--color-primary);
  }

  .converter-row {
    display: flex;
    gap: 24px;
    flex-wrap: wrap;
  }
  .converter-col {
    flex: 1;
    min-width: 200px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .converter-result {
    padding: 10px 14px;
    background: var(--color-bg);
    border-radius: var(--radius);
    font-size: 1rem;
    font-weight: 600;
    min-height: 40px;
    display: flex;
    align-items: center;
  }

  @media (max-width: 640px) {
    .converter-row {
      flex-direction: column;
    }
    .roman-large {
      font-size: 1.5rem;
    }
  }
</style>

<script>
  function intToRoman(num) {
    var vals = [1000,900,500,400,100,90,50,40,10,9,5,4,1];
    var syms = ['M','CM','D','CD','C','XC','L','XL','X','IX','V','IV','I'];
    var result = '';
    for (var i = 0; i < vals.length; i++) {
      while (num >= vals[i]) { result += syms[i]; num -= vals[i]; }
    }
    return result;
  }

  function romanToInt(s) {
    var map = {I:1,V:5,X:10,L:50,C:100,D:500,M:1000};
    var result = 0;
    for (var i = 0; i < s.length; i++) {
      var cur = map[s[i].toUpperCase()] || 0;
      var next = map[s[i+1]?.toUpperCase()] || 0;
      result += (cur < next) ? -cur : cur;
    }
    return result;
  }

  var numInput = document.getElementById('numInput');
  var numToRomanBtn = document.getElementById('numToRomanBtn');
  var numToRomanResult = document.getElementById('numToRomanResult');
  var romanInput = document.getElementById('romanInput');
  var romanToNumBtn = document.getElementById('romanToNumBtn');
  var romanToNumResult = document.getElementById('romanToNumResult');

  function convertNumToRoman() {
    var num = parseInt(numInput.value, 10);
    if (isNaN(num) || num < 1 || num > 3999) {
      numToRomanResult.textContent = 'Enter a number between 1 and 3,999.';
      return;
    }
    numToRomanResult.textContent = intToRoman(num);
  }

  function convertRomanToNum() {
    var val = romanInput.value.trim().toUpperCase();
    if (!val || !/^[MDCLXVI]+$/.test(val)) {
      romanToNumResult.textContent = 'Enter valid Roman numeral characters (I, V, X, L, C, D, M).';
      return;
    }
    var num = romanToInt(val);
    if (num < 1 || num > 3999) {
      romanToNumResult.textContent = 'Result out of range (1-3,999).';
      return;
    }
    romanToNumResult.textContent = num.toLocaleString('en-US');
  }

  numToRomanBtn.addEventListener('click', convertNumToRoman);
  numInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') convertNumToRoman();
  });

  romanToNumBtn.addEventListener('click', convertRomanToNum);
  romanInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') convertRomanToNum();
  });

  convertNumToRoman();
  convertRomanToNum();
</script>
