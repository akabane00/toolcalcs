---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdUnit from '../../components/AdUnit.astro';
import { getWorksheetBySlug } from '../../data/worksheets';
import '../../styles/worksheet.css';

const ws = getWorksheetBySlug('division-worksheets')!;

const structuredData = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://toolcalcs.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Worksheets",
      "item": "https://toolcalcs.com/worksheets/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Division Worksheets"
    }
  ]
};
---

<BaseLayout
  title="Free Division Worksheets - Printable Math Practice | ToolCalcs"
  description={ws.description}
  type="article"
  structuredData={structuredData}
>
  <nav class="breadcrumb">
    <a href="/">Home</a> &rsaquo;
    <a href="/worksheets/">Worksheets</a> &rsaquo;
    <span>Division Worksheets</span>
  </nav>

  <h1>{ws.title}</h1>
  <p class="page-desc">{ws.description}</p>

  <div class="worksheet-box">
    <!-- Config Panel -->
    <div class="config-panel">
      <h3>Worksheet Settings</h3>
      <div class="config-inputs">
        <div class="config-group">
          <label for="cfg-problems">Number of Problems</label>
          <input type="number" id="cfg-problems" min="5" max="50" value="20" />
        </div>
        <div class="config-group">
          <label for="cfg-divisor">Max Divisor</label>
          <select id="cfg-divisor">
            <option value="5">Up to 5</option>
            <option value="10" selected>Up to 10</option>
            <option value="12">Up to 12</option>
          </select>
        </div>
        <div class="config-group">
          <label for="cfg-remainder">Remainders</label>
          <select id="cfg-remainder">
            <option value="no" selected>No Remainders</option>
            <option value="yes">With Remainders</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Worksheet Actions -->
    <div class="worksheet-actions">
      <button class="ws-btn primary" id="btn-generate">Generate New</button>
      <button class="ws-btn print" id="btn-print">Print</button>
      <label class="toggle-label">
        <input type="checkbox" id="chk-answers" />
        Show Answers
      </label>
    </div>

    <!-- Worksheet Content -->
    <div class="worksheet-content" id="worksheet-area">
      <div class="worksheet-header-print">
        <h2>Division Practice</h2>
        <div class="name-date">
          <span>Name: ___________________</span>
          <span>Date: ___________________</span>
        </div>
      </div>
      <div class="problem-grid" id="problem-grid"></div>
      <div class="answer-key hidden" id="answer-key">
        <h3>Answer Key</h3>
        <div class="answer-grid" id="answer-grid"></div>
      </div>
    </div>
  </div>

  <AdUnit slot="ws-division-mid" format="horizontal" />

  <article class="content-section">
    <h2>Free Printable Division Worksheets</h2>
    <p>
      Division is one of the four fundamental arithmetic operations, and building
      strong division skills in elementary school sets the stage for success in
      fractions, ratios, algebra, and beyond. Our free printable division
      worksheets let parents, teachers, and tutors generate unlimited practice
      problems in seconds -- no login or subscription required.
    </p>
    <p>
      Every worksheet is randomly generated, so students receive fresh problems
      each time they click "Generate New." Adjust the number of problems, choose
      the maximum divisor, and decide whether to include remainders. When the
      worksheet is ready, hit "Print" for a clean, classroom-ready page with an
      optional answer key.
    </p>

    <h2>How to Use These Division Worksheets</h2>
    <p>
      Start by selecting the settings that match your student's level. Younger
      learners or those just beginning division should keep the max divisor at 5
      and turn remainders off. As confidence grows, increase the divisor range to
      10 or 12. Once students are comfortable with exact division, enable
      remainders to introduce the concept of leftover values.
    </p>
    <p>
      Click "Generate New" to create a set of problems, then use the "Print"
      button to send the worksheet straight to your printer. Toggle "Show
      Answers" if you want to reveal the solution to each problem on-screen, or
      print the answer key separately for easy grading.
    </p>

    <h2>Division Without Remainders</h2>
    <p>
      When remainders are turned off, every dividend is a perfect multiple of its
      divisor. For example, a problem like <strong>24 &divide; 6 = ___</strong>
      has a clean whole-number answer of 4. This mode reinforces multiplication
      fact families: if a student knows that 6 &times; 4 = 24, they can quickly
      see that 24 &divide; 6 = 4.
    </p>
    <p>
      Practicing no-remainder division helps students internalize times tables
      from the inverse perspective, strengthening both multiplication recall and
      division fluency at the same time.
    </p>

    <h2>Division With Remainders</h2>
    <p>
      Real-world division often produces leftovers. Turning on remainders
      generates problems where the dividend is not necessarily a multiple of the
      divisor. Answers are displayed in the classic "Q R r" format -- for
      instance, <strong>17 &divide; 5 = 3 R 2</strong> because 5 goes into 17
      three times with 2 left over.
    </p>
    <p>
      This mode is ideal for students who have mastered basic division facts and
      are ready to handle more complex scenarios. Understanding remainders is
      also a precursor to working with decimals and fractions in later grades.
    </p>

    <h2>Tips for Teaching Division</h2>
    <ul>
      <li>
        <strong>Connect to multiplication:</strong> Remind students that
        division is the inverse of multiplication. If they know their times
        tables, they already know division facts.
      </li>
      <li>
        <strong>Use manipulatives:</strong> Physical objects like counters or
        blocks help visual learners see how a total is split into equal groups.
      </li>
      <li>
        <strong>Start small:</strong> Begin with divisors of 2 and 5, which
        align with skip-counting patterns students usually learn first.
      </li>
      <li>
        <strong>Practice daily:</strong> Short, consistent sessions of 5-10
        minutes are more effective than long, infrequent practice.
      </li>
      <li>
        <strong>Celebrate progress:</strong> Use timed drills occasionally to
        track improvement and build confidence.
      </li>
    </ul>

    <h2>Grade-Level Guidelines</h2>
    <p>
      Division concepts are typically introduced in third grade with simple
      facts and equal-group models. By fourth grade, students work with larger
      dividends and encounter remainders. Fifth graders extend division to
      multi-digit dividends and begin connecting remainders to fractions and
      decimals.
    </p>
    <p>
      Our worksheet generator covers all of these stages. Set the max divisor to
      5 for third graders, 10 for fourth graders, and 12 for fifth graders who
      need to master the full set of basic division facts.
    </p>

    <h2>Why Printable Worksheets Still Matter</h2>
    <p>
      While digital tools have their place, research consistently shows that
      handwriting math problems improves retention and procedural fluency.
      Printable worksheets give students the tactile experience of writing out
      each answer, free from the distractions of screens and notifications.
      They also make it easy for teachers to collect and review student work.
    </p>
  </article>

  <AdUnit slot="ws-division-bottom" format="horizontal" />
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- DOM references ---
    const cfgProblems = document.getElementById('cfg-problems') as HTMLInputElement;
    const cfgDivisor = document.getElementById('cfg-divisor') as HTMLSelectElement;
    const cfgRemainder = document.getElementById('cfg-remainder') as HTMLSelectElement;
    const btnGenerate = document.getElementById('btn-generate') as HTMLButtonElement;
    const btnPrint = document.getElementById('btn-print') as HTMLButtonElement;
    const chkAnswers = document.getElementById('chk-answers') as HTMLInputElement;
    const problemGrid = document.getElementById('problem-grid') as HTMLDivElement;
    const answerKey = document.getElementById('answer-key') as HTMLDivElement;
    const answerGrid = document.getElementById('answer-grid') as HTMLDivElement;

    interface Problem {
      dividend: number;
      divisor: number;
      answer: string;
    }

    // --- Random integer in [min, max] ---
    function randInt(min: number, max: number): number {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // --- Generate problems ---
    function generateProblems(): Problem[] {
      let count = parseInt(cfgProblems.value, 10);
      if (isNaN(count) || count < 5) count = 5;
      if (count > 50) count = 50;
      cfgProblems.value = String(count);

      const maxDivisor = parseInt(cfgDivisor.value, 10);
      const allowRemainder = cfgRemainder.value === 'yes';
      const problems: Problem[] = [];

      for (let i = 0; i < count; i++) {
        const divisor = randInt(1, maxDivisor);

        if (allowRemainder) {
          // Dividend ranges from divisor (so quotient >= 1) up to divisor * 12 + (divisor - 1)
          const minDividend = divisor;
          const maxDividend = divisor * 12 + (divisor - 1);
          const dividend = randInt(minDividend, maxDividend);
          const quotient = Math.floor(dividend / divisor);
          const remainder = dividend % divisor;
          const answer = remainder === 0
            ? String(quotient)
            : `${quotient} R ${remainder}`;
          problems.push({ dividend, divisor, answer });
        } else {
          // No remainder: pick a quotient, compute dividend
          const quotient = randInt(1, 12);
          const dividend = divisor * quotient;
          problems.push({ dividend, divisor, answer: String(quotient) });
        }
      }

      return problems;
    }

    // --- Render worksheet ---
    function render(problems: Problem[]): void {
      // Build problem grid
      let gridHtml = '';
      problems.forEach((p, i) => {
        gridHtml += `
          <div class="problem">
            <div class="problem-number">${i + 1}</div>
            <div class="problem-text">${p.dividend} &divide; ${p.divisor} = ___</div>
          </div>`;
      });
      problemGrid.innerHTML = gridHtml;

      // Build answer key
      let keyHtml = '';
      problems.forEach((p, i) => {
        keyHtml += `
          <div class="answer-item">
            <span class="q">${i + 1}.</span>
            <span class="a">${p.answer}</span>
          </div>`;
      });
      answerGrid.innerHTML = keyHtml;

      // Reset answer key visibility to match checkbox
      updateAnswerVisibility();
    }

    // --- Toggle answer key ---
    function updateAnswerVisibility(): void {
      if (chkAnswers.checked) {
        answerKey.classList.remove('hidden');
      } else {
        answerKey.classList.add('hidden');
      }
    }

    // --- Event listeners ---
    btnGenerate.addEventListener('click', () => {
      render(generateProblems());
    });

    btnPrint.addEventListener('click', () => {
      window.print();
    });

    chkAnswers.addEventListener('change', updateAnswerVisibility);

    // --- Initial generation ---
    render(generateProblems());
  });
</script>
