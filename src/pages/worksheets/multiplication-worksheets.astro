---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdUnit from '../../components/AdUnit.astro';
import { getWorksheetBySlug } from '../../data/worksheets';
import '../../styles/worksheet.css';

const ws = getWorksheetBySlug('multiplication-worksheets')!;

const structuredData = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://toolcalcs.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Worksheets",
      "item": "https://toolcalcs.com/worksheets/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Multiplication Worksheets"
    }
  ]
};
---

<BaseLayout
  title="Free Multiplication Worksheets - Times Tables Practice | ToolCalcs"
  description={ws.description}
  type="article"
  structuredData={structuredData}
>
  <nav class="breadcrumb">
    <a href="/">Home</a> &rsaquo;
    <a href="/worksheets/">Worksheets</a> &rsaquo;
    <span>Multiplication Worksheets</span>
  </nav>

  <h1>{ws.title}</h1>
  <p class="page-desc">{ws.description}</p>

  <div class="worksheet-box">
    <!-- Config Panel -->
    <div class="config-panel">
      <h3>Worksheet Settings</h3>
      <div class="config-inputs">
        <div class="config-group">
          <label for="cfg-problems">Number of Problems</label>
          <input type="number" id="cfg-problems" min="5" max="50" value="20" />
        </div>
        <div class="config-group">
          <label for="cfg-tableRange">Times Table Range</label>
          <select id="cfg-tableRange">
            <option value="5">1-5</option>
            <option value="10">1-10</option>
            <option value="12" selected>1-12</option>
          </select>
        </div>
        <div class="config-group">
          <label for="cfg-type">Problem Type</label>
          <select id="cfg-type">
            <option value="single">Single &times; Single</option>
            <option value="multi">Double &times; Single</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Worksheet Actions -->
    <div class="worksheet-actions">
      <button id="btn-generate" class="ws-btn primary">Generate New</button>
      <button id="btn-print" class="ws-btn print">Print</button>
      <label class="toggle-label">
        <input type="checkbox" id="toggle-answers" />
        Show Answers
      </label>
    </div>

    <!-- Worksheet Content -->
    <div class="worksheet-content" id="worksheet-content">
      <div class="worksheet-header-print">
        <h2>Multiplication Practice</h2>
        <div class="name-date">
          <span>Name: ___________________</span>
          <span>Date: ___________________</span>
        </div>
      </div>
      <div class="problem-grid" id="problem-grid"></div>
      <div class="answer-key hidden" id="answer-key">
        <h3>Answer Key</h3>
        <div class="answer-grid" id="answer-grid"></div>
      </div>
    </div>
  </div>

  <AdUnit slot="ws-mid" format="horizontal" />

  <article class="content-section">
    <h2>Free Printable Multiplication Worksheets</h2>
    <p>
      Multiplication is one of the foundational math skills that students encounter starting in second and third grade. Our free multiplication worksheet generator creates unlimited, randomized practice problems that you can print at home or in the classroom. Every time you click "Generate New," a fresh set of problems appears, so students never run out of material.
    </p>
    <p>
      These worksheets cover times tables from 1 through 12 and support both single-digit and double-digit multiplication problems. Whether your child is just beginning to learn the basic multiplication facts or needs extra practice with larger numbers, the configurable settings make it easy to match the worksheet to the right skill level.
    </p>

    <h2>How to Use the Multiplication Worksheet Generator</h2>
    <p>
      Getting started is simple. Use the settings panel above to customize your worksheet. Choose the number of problems (anywhere from 5 to 50), select a times table range, and pick between single-digit or double-digit multiplication. Click "Generate New" to create a randomized set of problems, then hit "Print" to produce a clean, printer-friendly page. You can also toggle "Show Answers" to reveal or hide the answer key, which prints on a separate page when visible.
    </p>

    <h2>Why Times Tables Practice Matters</h2>
    <p>
      Memorizing the multiplication tables is more than rote memorization. When students develop automatic recall of basic multiplication facts, they free up working memory for more complex tasks like long division, fractions, and algebra. Research consistently shows that fluency with multiplication facts is one of the strongest predictors of success in later mathematics coursework.
    </p>
    <p>
      Regular, short practice sessions are more effective than occasional marathon study periods. Spending just 10 to 15 minutes a day on multiplication worksheets can lead to significant improvement within a few weeks. Aim for consistency rather than quantity.
    </p>

    <h3>Tips for Effective Multiplication Practice</h3>
    <ul>
      <li><strong>Start small.</strong> Begin with the 1s, 2s, 5s, and 10s tables before moving on to more challenging facts like 7s, 8s, and 12s.</li>
      <li><strong>Use the commutative property.</strong> Remind students that 3 &times; 7 is the same as 7 &times; 3. Learning one fact automatically gives you its pair.</li>
      <li><strong>Time it (optionally).</strong> Once a student is comfortable with accuracy, gentle timed practice can build speed and confidence.</li>
      <li><strong>Mix it up.</strong> Alternate between single-digit and double-digit problems so students stay engaged and challenged.</li>
      <li><strong>Celebrate progress.</strong> Track scores over time and acknowledge improvement, not just perfection.</li>
    </ul>

    <h2>Single-Digit vs. Double-Digit Multiplication</h2>
    <p>
      Single-digit multiplication (such as 6 &times; 8) focuses on memorizing the core times table facts. These problems are displayed in a horizontal format for quick recognition and recall. Most curricula expect students to have these facts memorized by the end of third grade.
    </p>
    <p>
      Double-digit multiplication (such as 47 &times; 6) introduces the concept of multi-step multiplication and carrying. These problems are displayed in a vertical, column-style format that mirrors how students solve them by hand. This format helps students practice proper alignment and the distributive property of multiplication, breaking a problem like 47 &times; 6 into (40 &times; 6) + (7 &times; 6).
    </p>

    <h2>Grade-Level Guidelines</h2>
    <p>
      While every child learns at their own pace, here are general guidelines for multiplication skill development:
    </p>
    <ul>
      <li><strong>Grade 2:</strong> Introduction to multiplication as repeated addition. Start with the 2s, 5s, and 10s tables.</li>
      <li><strong>Grade 3:</strong> Memorization of all single-digit multiplication facts (1-10). Introduction to the concept of factors and products.</li>
      <li><strong>Grade 4:</strong> Fluency with facts through 12. Multi-digit multiplication (two-digit by one-digit, then two-digit by two-digit).</li>
      <li><strong>Grade 5:</strong> Multi-digit multiplication with larger numbers. Application to fractions, decimals, and real-world word problems.</li>
    </ul>

    <h2>Printing Tips</h2>
    <p>
      For the best printed results, use your browser's built-in print function (Ctrl+P or Cmd+P). The worksheet automatically hides navigation, settings, and ads when printing so you get a clean page with only the problems. If "Show Answers" is turned on, the answer key will print on a separate page. Set your printer to portrait orientation and standard letter or A4 paper size for optimal formatting.
    </p>
  </article>

  <AdUnit slot="ws-bottom" format="horizontal" />
</BaseLayout>

<script>
  const grid = document.getElementById('problem-grid')!;
  const answerGrid = document.getElementById('answer-grid')!;
  const answerKey = document.getElementById('answer-key')!;
  const btnGenerate = document.getElementById('btn-generate')!;
  const btnPrint = document.getElementById('btn-print')!;
  const toggleAnswers = document.getElementById('toggle-answers') as HTMLInputElement;
  const cfgProblems = document.getElementById('cfg-problems') as HTMLInputElement;
  const cfgTableRange = document.getElementById('cfg-tableRange') as HTMLSelectElement;
  const cfgType = document.getElementById('cfg-type') as HTMLSelectElement;

  interface Problem {
    a: number;
    b: number;
    answer: number;
  }

  function randInt(min: number, max: number): number {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function generateProblems(): Problem[] {
    const count = Math.min(50, Math.max(5, parseInt(cfgProblems.value, 10) || 20));
    const tableRange = parseInt(cfgTableRange.value, 10) || 12;
    const type = cfgType.value;
    const problems: Problem[] = [];

    for (let i = 0; i < count; i++) {
      let a: number;
      let b: number;

      if (type === 'multi') {
        a = randInt(10, 99);
        b = randInt(1, tableRange);
      } else {
        a = randInt(1, tableRange);
        b = randInt(1, tableRange);
      }

      problems.push({ a, b, answer: a * b });
    }

    return problems;
  }

  function renderHorizontalProblem(p: Problem, index: number, showAnswer: boolean): string {
    const answerDisplay = showAnswer
      ? `<span class="problem-answer revealed">${p.answer}</span>`
      : `<span class="problem-answer">&#8203;</span>`;

    return `
      <div class="problem">
        <div class="problem-number">${index + 1}</div>
        <div class="problem-text">${p.a} &times; ${p.b} =</div>
        ${answerDisplay}
      </div>
    `;
  }

  function renderVerticalProblem(p: Problem, index: number, showAnswer: boolean): string {
    const aStr = String(p.a);
    const bStr = String(p.b);
    const answerStr = String(p.answer);
    const maxLen = Math.max(aStr.length, bStr.length, answerStr.length);

    const answerDisplay = showAnswer
      ? `<div class="problem-answer revealed" style="text-align:right;">${answerStr.padStart(maxLen, '\u00A0')}</div>`
      : `<div class="problem-answer" style="min-width:${maxLen * 16}px;">&#8203;</div>`;

    return `
      <div class="problem">
        <div class="problem-number">${index + 1}</div>
        <div class="problem-vertical">
          <div style="text-align:right;">${aStr.padStart(maxLen, '\u00A0')}</div>
          <div style="text-align:right;">&times;&nbsp;${bStr.padStart(maxLen - 1, '\u00A0')}</div>
          <div class="line"></div>
          ${answerDisplay}
        </div>
      </div>
    `;
  }

  function renderWorksheet(problems: Problem[], showAnswer: boolean): void {
    const type = cfgType.value;

    grid.innerHTML = problems
      .map((p, i) =>
        type === 'multi'
          ? renderVerticalProblem(p, i, showAnswer)
          : renderHorizontalProblem(p, i, showAnswer)
      )
      .join('');

    answerGrid.innerHTML = problems
      .map(
        (p, i) =>
          `<div class="answer-item"><span class="q">${i + 1}.</span> <span class="a">${p.a} &times; ${p.b} = ${p.answer}</span></div>`
      )
      .join('');
  }

  let currentProblems: Problem[] = [];

  function generate(): void {
    currentProblems = generateProblems();
    renderWorksheet(currentProblems, toggleAnswers.checked);
  }

  toggleAnswers.addEventListener('change', () => {
    answerKey.classList.toggle('hidden', !toggleAnswers.checked);
    renderWorksheet(currentProblems, toggleAnswers.checked);
  });

  btnGenerate.addEventListener('click', generate);

  btnPrint.addEventListener('click', () => {
    window.print();
  });

  // Clamp problems input on blur
  cfgProblems.addEventListener('blur', () => {
    let val = parseInt(cfgProblems.value, 10);
    if (isNaN(val) || val < 5) val = 5;
    if (val > 50) val = 50;
    cfgProblems.value = String(val);
  });

  // Auto-regenerate when settings change
  cfgTableRange.addEventListener('change', generate);
  cfgType.addEventListener('change', generate);

  // Generate initial worksheet
  generate();
</script>
